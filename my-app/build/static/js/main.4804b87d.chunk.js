(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{20:function(e,a,t){e.exports=t(42)},25:function(e,a,t){},31:function(e,a,t){},32:function(e,a,t){},33:function(e,a,t){},34:function(e,a,t){},35:function(e,a,t){},36:function(e,a,t){},37:function(e,a,t){},38:function(e,a,t){},39:function(e,a,t){},40:function(e,a,t){},41:function(e,a,t){},42:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(17),c=t.n(r),s=t(3),i=t(4),o=(t(25),function(){return l.a.createElement("nav",{className:"header-nav"},l.a.createElement("ul",{className:"nav-list"},l.a.createElement(s.c,{exact:!0,to:"/",className:"nav-link link--default",activeClassName:"active"},"Home"),l.a.createElement(s.c,{exact:!0,to:"/practitioners",className:"nav-link link--default",activeClassName:"active"},"Practitioners")))}),m=(t(31),function(){return l.a.createElement("header",{className:"component-header"},l.a.createElement(s.c,{to:"/",className:"header-title link--default"},l.a.createElement("h1",null,"Leah")),l.a.createElement(o,null),l.a.createElement("div",{className:"header-profile"},l.a.createElement("a",{href:"https://github.com/bnabet/coding-challenge-frontend",target:"_blank",rel:"noopener noreferrer",title:"Go to the Github project - new window",className:"profile-link link--default"},"Benjamin Nabet")))}),d=(t(32),function(){return l.a.createElement("div",{className:"app-container component-home"},l.a.createElement("div",{className:"page"},l.a.createElement(m,null),l.a.createElement("div",{className:"home-inner"},l.a.createElement("div",{className:"home-icon"}),l.a.createElement(s.b,{to:"/practitioners",className:"home-link"},"Search a doctor"))))}),u=t(5),f=t(6),p=t(7),h=t(8),v=(t(33),function(){return l.a.createElement("footer",{className:"footer"},l.a.createElement("div",{className:"footer-container"},l.a.createElement("div",{className:"footer-infos"},l.a.createElement("div",{className:"footer-bloc"},l.a.createElement("div",{className:"footer-title"},"Need a front-end developper ?"),l.a.createElement("div",{className:"footer-subtitle"},"Contact me"," ",l.a.createElement("span",{role:"img","aria-label":"smiley smiling"},"\ud83d\ude01"))),l.a.createElement("div",{className:"footer-bloc footer-bloc--contact"},l.a.createElement("div",{className:"contact-mail"},l.a.createElement("small",{className:"contact-label"},"Email"),l.a.createElement("a",{href:"mailto:ben.nabet08@gmail.com",className:"contact-link link--default",title:"Send a mail to ben.nabet08@gmail.com"},"ben.nabet08@gmail.com")),l.a.createElement("div",{className:"contact-phone"},l.a.createElement("small",{className:"contact-label"},"Phone"),l.a.createElement("a",{href:"tel:+33695168424",className:"contact-link link--default",title:"Call Benjamin Nabet to +33 6 95 16 84 24"},"+33 6 95 16 84 24")))),l.a.createElement("hr",{className:"footer-divider"}),l.a.createElement("div",{className:"footer-copyright"},"Created by Benjamin Nabet - 2020")))}),E=(t(34),function(e){Object(h.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=a.call.apply(a,[this].concat(l))).state={query:""},e.handleChange=function(a){e.setState({query:a.target.value})},e.handleSubmit=function(a,t){var n="http://hapi.fhir.org/baseDstu3/Practitioner?given=".concat(t,"&_format=json&_pretty=true");e.props.fetchList(n),a.preventDefault()},e}return Object(f.a)(t,[{key:"render",value:function(){var e=this,a=this.state.query;return l.a.createElement("section",{className:"component-search"},l.a.createElement("form",{className:"search-form",onSubmit:function(t){return e.handleSubmit(t,a)}},l.a.createElement("label",{className:"search-label"},"Looking for a practitioner ?"),l.a.createElement("div",{className:"search-description"},"Search a doctor by his first name. If you are looking for a baker you are on the wrong site ..."),l.a.createElement("div",{className:"search-inner"},l.a.createElement("input",{type:"search",name:"query",placeholder:"Your search...",className:"search-input input--default",onChange:this.handleChange}),l.a.createElement("button",{className:"search-submit"+(""!==a?" active":"")},"search"))))}}]),t}(l.a.Component)),N=(t(35),function(e){var a=e.practitioner,t=e.avatar,n=a.resource.id,r=a.resource.active,c=a.resource.name,i=[c[0].prefix?c[0].prefix[0]:"",c[0].suffix?c[0].suffix[0]:"",c[c.length-1].given?c[c.length-1].given.join(" "):"",c[c.length-1].family?c[c.length-1].family:c[c.length-1]._family?c[c.length-1]._family.extension.map((function(e){return e.valueString})).join(" "):c[0].text].filter((function(e){return void 0!==e})).filter((function(e){return""!==e})).join(" ");return l.a.createElement("article",{className:"component-practitioner article",key:n},l.a.createElement("div",{className:"article-icon avatar-"+t}),l.a.createElement("div",{className:"article-identity"},l.a.createElement(s.b,{to:{pathname:"/practitioners/".concat(n),state:{title:i}},className:"article-link"},i),l.a.createElement("span",{className:"article-resourceType"},a.resource.resourceType)),l.a.createElement("div",{className:"article-status"},l.a.createElement("div",{className:"status-label"+(r?" active":"")},r?"active":"inactive")))}),g=(t(36),function(){return l.a.createElement("div",{className:"component-loader"},l.a.createElement("div",{className:"loader-title"},"Loading ..."),l.a.createElement("div",{className:"loader-spinner"}))}),b=function(e){return e.children},y=(t(37),"http://hapi.fhir.org/baseDstu3/Practitioner?_format=json"),k=function(e){Object(h.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=a.call.apply(a,[this].concat(l))).state={practitioners:[],link:[],searchId:null,query:"",totalResults:null,loading:!1},e.distinctNames=function(e){var a=[],t=[];return e.length&&e.forEach((function(e){var n;n=e.resource.name[e.resource.name.length-1].family?e.resource.name[e.resource.name.length-1].family.split(" ").pop():e.resource.name[e.resource.name.length-1]._family?e.resource.name[e.resource.name.length-1]._family.extension.map((function(e){return e.valueString})).join(" "):"",-1===a.indexOf(n)&&(a.push(n),t.push(e))})),t},e.fetchList=function(a){e.setState({loading:!0}),fetch(a||y).then((function(e){return e.json()})).then((function(a){var t=a.entry.filter((function(e){return e.resource.name})).filter((function(e){return e.resource.name[0].given}));t=e.distinctNames(t),e.setState({practitioners:t,link:a.link,searchId:a.id,totalResults:a.total?t.length:null,loading:!1})})).catch((function(e){console.error(e)}))},e}return Object(f.a)(t,[{key:"componentDidMount",value:function(){this.fetchList()}},{key:"render",value:function(){var e=this,a=this.state,t=a.practitioners,n=a.link,r=a.totalResults,c=a.loading,s=null;return s=c?l.a.createElement(g,null):l.a.createElement(b,null,r>0&&l.a.createElement("div",{className:"content-totalResults"},"We found ",r," practitioner(s)."),t.length>0&&this.distinctNames(t).map((function(e){var a=Math.floor(10*Math.random());return l.a.createElement(N,{key:e.resource.id,practitioner:e,avatar:a})})),0===t.length&&l.a.createElement("div",{className:"content-noResults",id:"noResults"},"No results on this page...",l.a.createElement("span",{role:"img","aria-label":"smiley sorry"},"\ud83d\ude30")),l.a.createElement("div",{className:"content-pagination"},n[2]&&"previous"===n[2].relation&&l.a.createElement("button",{className:"pagination-button",onClick:function(){return e.fetchList(n[2].url)}},"PREV"),n[1]&&"next"===n[1].relation&&l.a.createElement("button",{className:"pagination-button",onClick:function(){return e.fetchList(n[1].url)}},"NEXT"))),l.a.createElement("div",{className:"app-container component-list"},l.a.createElement("div",{className:"page"},l.a.createElement(m,null),l.a.createElement(E,{fetchList:this.fetchList}),l.a.createElement("section",{className:"page-content"},l.a.createElement("div",{className:"content-title"},r>0?"Results of your search":"List of the practitioners"),l.a.createElement("div",{className:"content-container"},s))),!c&&l.a.createElement(v,null))}}]),t}(l.a.Component),_=t(13),C=t(14),x=(t(38),function(e){var a=e.practitioner,t=e.handleSubmit,n=e.handleInputChange,r=e.addContact,c=e.deleteContact;return l.a.createElement("form",{className:"component-form",onSubmit:function(e){return t(e)}},l.a.createElement("fieldset",{className:"form-fieldset"},l.a.createElement("legend",{className:"form-legend"},"name"),a.name.map((function(e,t){return Object.entries(e).map((function(e){var r=Object(C.a)(e,2),c=r[0],s=r[1];return l.a.createElement("div",{className:"form-field",key:c},l.a.createElement("label",{className:"form-label"},"_family"===c?"extensions":c),"_family"!==c&&("use"===c?l.a.createElement("select",{name:"name_use",value:a.name[a.name.length-1].use,onChange:function(e){return n(e,t)},className:"form-select"+(a.name[a.name.length-1].use?" selected":"")},l.a.createElement("option",{value:""},"Choose a use"),l.a.createElement("option",{value:"usual"},"usual"),l.a.createElement("option",{value:"official"},"official")):l.a.createElement("input",{type:"text",name:"name_"+c,value:s,onChange:function(e){return n(e,t)},className:"input--default"+(s.length?" valid":"")})),"_family"===c&&l.a.createElement("div",{className:"form-field-extensions"},Object.entries(s.extension).map((function(e,a){var r=Object(C.a)(e,2),c=r[0],s=r[1];return l.a.createElement("input",{type:"text",name:"name_family",value:s.valueString,onChange:function(e){return n(e,t,a)},className:"input--default input--default--extension",key:c})}))))}))}))),l.a.createElement("fieldset",{className:"form-fieldset"},l.a.createElement("legend",{className:"form-legend"},"qualification"),l.a.createElement("div",{className:"form-field"},l.a.createElement("label",{className:"form-label"},"system"),l.a.createElement("input",{type:"text",name:"qualification_system",value:a.qualification&&a.qualification[0].code.coding[0].system||"",placeholder:"http://yoursite.com",onChange:function(e){return n(e)},className:"input--default"+(a.qualification&&a.qualification[0].code.coding[0].system?" valid":"")})),l.a.createElement("div",{className:"form-field"},l.a.createElement("label",{className:"form-label"},"code"),l.a.createElement("input",{type:"number",name:"qualification_code",value:a.qualification&&a.qualification[0].code.coding[0].code||"",onChange:function(e){return n(e)},className:"input--default"+(a.qualification&&a.qualification[0].code.coding[0].code?" valid":"")})),l.a.createElement("div",{className:"form-field"},l.a.createElement("label",{className:"form-label"},"display"),l.a.createElement("input",{name:"qualification_display",type:"text",value:a.qualification&&a.qualification[0].code.coding[0].display||"",onChange:function(e){return n(e)},className:"input--default"+(a.qualification&&a.qualification[0].code.coding[0].display?" valid":"")}))),l.a.createElement("fieldset",{className:"form-fieldset"},l.a.createElement("legend",{className:"form-legend"},"address"),l.a.createElement("div",{className:"form-field"},l.a.createElement("label",{className:"form-label"},"use"),l.a.createElement("select",{name:"address_use",value:a.address&&a.address[0].use,onChange:function(e){return n(e)},className:"form-select"+(a.address&&a.address[0].use?" selected":"")},l.a.createElement("option",{value:""},"Choose a use"),l.a.createElement("option",{value:"work"},"work"),l.a.createElement("option",{value:"home"},"home"))),l.a.createElement("div",{className:"form-field"},l.a.createElement("label",{className:"form-label"},"type"),l.a.createElement("select",{name:"address_type",value:a.address&&a.address[0].type,onChange:function(e){return n(e)},className:"form-select"+(a.address&&a.address[0].type?" selected":"")},l.a.createElement("option",{value:""},"Choose a type"),l.a.createElement("option",{value:"physical"},"physical"),l.a.createElement("option",{value:"virtual"},"virtual"))),l.a.createElement("div",{className:"form-field"},l.a.createElement("label",{className:"form-label"},"line/text"),l.a.createElement("input",{type:"text",name:!a.address||a.address&&1===Object.keys(a.address[0]).length&&a.address[0].text||a.address&&1===Object.keys(a.address[0]).length&&a.address[0].line?"address_text":"address_line",value:a.address&&(a.address[0].line||a.address[0].text)||"",onChange:function(e){return n(e)},className:"input--default"+(a.address&&(a.address[0].line||a.address[0].text)?" valid":"")})),l.a.createElement("div",{className:"form-field"},l.a.createElement("label",{className:"form-label"},"city"),l.a.createElement("input",{type:"text",name:"address_city",value:a.address&&a.address[0].city||"",onChange:function(e){return n(e)},className:"input--default"+(a.address&&a.address[0].city?" valid":"")})),l.a.createElement("div",{className:"form-field"},l.a.createElement("label",{className:"form-label"},"state"),l.a.createElement("input",{type:"text",name:"address_state",value:a.address&&a.address[0].state||"",onChange:function(e){return n(e)},className:"input--default"+(a.address&&a.address[0].state?" valid":"")})),l.a.createElement("div",{className:"form-field"},l.a.createElement("label",{className:"form-label"},"postal code"),l.a.createElement("input",{type:"number",name:"address_postalCode",value:a.address&&a.address[0].postalCode||"",onChange:function(e){return n(e)},className:"input--default"+(a.address&&a.address[0].postalCode?" valid":"")})),l.a.createElement("div",{className:"form-field"},l.a.createElement("label",{className:"form-label"},"country"),l.a.createElement("input",{type:"text",name:"address_country",value:a.address&&a.address[0].country||"",onChange:function(e){return n(e)},className:"input--default"+(a.address&&a.address[0].country?" valid":"")}))),l.a.createElement("fieldset",{className:"form-fieldset"},l.a.createElement("legend",{className:"form-legend"},"telecom"),a.telecom&&a.telecom.map((function(e,a){return l.a.createElement("div",{className:"form-field",key:a},l.a.createElement("label",{className:"form-label"},"contact ",a+1),l.a.createElement("div",{className:"form-group"},l.a.createElement("select",{name:"telecom_system",value:e.system,onChange:function(e){return n(e,a)},className:"form-select form-select--"+e.system},l.a.createElement("option",{value:"phone"},"phone"),l.a.createElement("option",{value:"fax"},"fax"),l.a.createElement("option",{value:"email"},"email")),"\xa0",l.a.createElement("select",{name:"telecom_use",value:e.use,onChange:function(e){return n(e,a)},className:"form-select form-select--"+e.system},l.a.createElement("option",{value:""},"Choose a use"),l.a.createElement("option",{value:"work"},"work"),l.a.createElement("option",{value:"mobile"},"mobile"),l.a.createElement("option",{value:"home"},"home")),"\xa0",l.a.createElement("input",{type:"text",name:"telecom_value",value:e.value||"",onChange:function(e){return n(e,a)},className:"input--default"+(e.value?" valid":"")}),l.a.createElement("span",{className:"form-delete",onClick:function(){return c(a)}},"delete")))})),l.a.createElement("div",{className:"form-add form-submit",onClick:r},"Add contact")),l.a.createElement("fieldset",{className:"form-fieldset"},l.a.createElement("legend",{className:"form-legend"},"gender"),l.a.createElement("div",{className:"form-field"},l.a.createElement("select",{name:"profile_gender",value:a.gender,onChange:function(e){return n(e)},className:"form-select"+(a.gender?" selected":"")},l.a.createElement("option",{value:""},"Choose a gender"),l.a.createElement("option",{value:"male"},"male"),l.a.createElement("option",{value:"female"},"female")))),l.a.createElement("fieldset",{className:"form-fieldset"},l.a.createElement("legend",{className:"form-legend"},"birthdate"),l.a.createElement("div",{className:"form-field"},l.a.createElement("input",{type:"date",name:"profile_birthDate",value:a.birthDate||"",onChange:function(e){return n(e)},className:"input--default input--default--date"}))),l.a.createElement("fieldset",{className:"form-fieldset"},l.a.createElement("legend",{className:"form-legend"},"active"),l.a.createElement("input",{type:"checkbox",id:"profile_active",name:"profile_active",value:"active",checked:a.active||!1,onChange:function(e){return n(e)},className:"form-checkbox"}),l.a.createElement("label",{htmlFor:"profile_active"},"Are you active ?")),l.a.createElement("div",{className:"form-bottom"},l.a.createElement("input",{type:"submit",value:"Update profile",className:"form-submit"})))}),j=(t(39),function(e){Object(h.a)(t,e);var a=Object(p.a)(t);function t(){var e;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=a.call.apply(a,[this].concat(l))).state={practitioner:{},loading:!1},e.addContact=function(){var a=e.state.practitioner,t=a.telecom||[];t.push({system:"phone"}),a.telecom=t,e.setState({practitioner:a})},e.deleteContact=function(a){var t=e.state.practitioner,n=t.telecom||[];n.splice(a,1),t.telecom=n,e.setState({practitioner:t})},e.handleInputChange=function(a,t,n){var l=a.target,r=l.name,c=l.name.split("_")[0],s=l.name.split("_")[1],i=e.state.practitioner;switch(r){case"name_use":case"name_text":case"name_family":case"name_given":case"name_prefix":void 0!==n?i[c][t]["_"+s].extension[n].valueString=l.value:i[c][t][s]="given"===s||"prefix"===s?[l.value]:l.value;break;case"qualification_system":case"qualification_code":case"qualification_display":if(i.qualification)i[c][0].code.coding[0][s]=l.value;else{var o=[{code:{coding:[Object(_.a)({},s,l.value)]}}];i[c]=o}""===l.value&&(delete i[c][0].code.coding[0][s],0===Object.keys(i[c][0].code.coding[0]).length&&delete i[c]);break;case"address_text":case"address_line":case"address_city":case"address_state":case"address_postalCode":case"address_country":case"address_use":case"address_type":if(i.address)i.address[0].text&&"text"!==s&&(Object.defineProperty(i.address[0],"line",Object.getOwnPropertyDescriptor(i.address[0],"text")),delete i.address[0].text),i[c][0][s]=l.value;else{var m=[Object(_.a)({},s,l.value)];i[c]=m}""===l.value&&(delete i.address[0][s],i.address[0].line&&Object.keys(i.address[0]).length<2&&(Object.defineProperty(i.address[0],"text",Object.getOwnPropertyDescriptor(i.address[0],"line")),delete i.address[0].line),0===Object.keys(i.address[0]).length&&delete i.address);break;case"telecom_system":case"telecom_use":case"telecom_value":i[c][t][s]=l.value,""===l.value&&delete i[c][t][s];break;case"profile_gender":case"profile_birthDate":case"profile_active":i[s]="active"===s?l.checked:l.value,(""===l.value||"active"===s&&!l.checked)&&delete i[s]}e.setState({practitioner:i})},e.handleSubmit=function(a){var t={method:"PUT",headers:{Accept:"application/json","Content-type":"application/fhir+json"},body:JSON.stringify(e.state.practitioner)};fetch("http://hapi.fhir.org/baseDstu3/Practitioner/".concat(e.state.practitioner.id),t).then((function(e){return e.json()})).then((function(a){return e.props.history.push("/practitioners")})).catch((function(e){console.error(e)})),a.preventDefault()},e.fetchingPractitioner=function(){e.setState({loading:!0});var a=e.props.match.params.practitionerId;fetch("http://hapi.fhir.org/baseDstu3/Practitioner/".concat(a)).then((function(e){return e.json()})).then((function(a){var t=Object.keys(a).length;e.setState({practitioner:a,loading:!t})}))},e}return Object(f.a)(t,[{key:"componentDidMount",value:function(){this.fetchingPractitioner()}},{key:"render",value:function(){var e=this.state,a=e.practitioner,t=e.loading,n=(this.props.location.state||"").title,r=null;return r=Object.entries(a).length&&!t?l.a.createElement(b,null,l.a.createElement("div",{className:"profile-top"},l.a.createElement("div",{className:"profile-icon"}),l.a.createElement("div",{className:"profile-identity"},l.a.createElement("h2",{className:"profile-title"},n),l.a.createElement("span",{className:"profile-description"},"Practitioner"))),l.a.createElement(x,{practitioner:a,handleSubmit:this.handleSubmit,handleInputChange:this.handleInputChange,addContact:this.addContact,deleteContact:this.deleteContact}),l.a.createElement("span",{className:"profile-updated"},l.a.createElement("b",null,"Last updated : "),new Date(a.meta.lastUpdated).toLocaleString())):l.a.createElement(g,null),l.a.createElement("div",{className:"app-container component-practitioner"},l.a.createElement("div",{className:"page"},l.a.createElement("div",{className:"page-banner"},l.a.createElement(m,null)),l.a.createElement("section",{className:"page-content"},l.a.createElement("div",{className:"content-container content-container--profile"},r))),!t&&l.a.createElement(v,null))}}]),t}(l.a.Component)),O=(t(40),t(41),function(){return l.a.createElement("div",{className:"App"},l.a.createElement(s.a,null,l.a.createElement(i.c,null,l.a.createElement(i.a,{exact:!0,path:"/",component:d}),l.a.createElement(i.a,{exact:!0,path:"/practitioners",component:k}),l.a.createElement(i.a,{path:"/practitioners/:practitionerId",component:j}))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.4804b87d.chunk.js.map